(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return Q}));var r=a(0),n=a.n(r),c=a(7),o=a.n(c),l=a(16),i=a(32),u=a(15),s=a(45),m=a.n(s),p="https://bp-interview.herokuapp.com";function d(e,t){var a={params:t,headers:{"Content-Type":"application/json"}},r=m.a.get("".concat(p,"/categories/").concat(e,"/products"),a);return function(e){g(),r.then((function(t){var a=t.data;e({type:"list-products",payload:a})}))}}function g(){return function(e){return e({type:"clear-products",payload:null})}}function f(e){return function(t){return t({type:"change-category-params",payload:e})}}var y=a(71),v=a(20),h={page:1,limit:12,sort:"price",order:"asc",min_price:null,max_price:null},E={categoryParams:h},b=Object(i.c)({categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"list-categories":var a=Object(y.orderBy)(t.payload,["position"],["asc"]);return a;default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"list-products":return t.payload;case"clear-products":return[];default:return e}},single_category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get-category":return t.payload;case"clear-category":return null;default:return e}},single_product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"get-product":return t.payload;case"clear-single-product":return null;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type,t.payload),t.type){case"change-category-params":return Object(v.a)({},e,{categoryParams:t.payload});case"clear-category-params":return Object(v.a)({},e,{categoryParams:h});case"get-category":return Object(v.a)({},e,{categoryParams:Object(v.a)({},e.categoryParams,{min_price:t.payload.price_min,max_price:t.payload.price_max})});default:return e}}}),_=a(72);function j(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}var O=function(e){return(e/100).toFixed(2)};a(111);var N=Object(l.b)((function(e){return{product:e.single_product}}),{getProduct:function(e){var t=m.a.get("".concat(p,"/products/").concat(e),{"Content-Type":"application/json"});return function(e){t.then((function(t){var a=t.data;e({type:"get-product",payload:a})}))}},clearSingleProduct:function(){return function(e){return e({type:"clear-single-product",payload:null})}}})((function(e){var t=e.product,a=e.getProduct,c=e.clearSingleProduct,o=e.match.params.id,l=j(o);Object(r.useEffect)((function(){o!==l&&(console.log(o,l),a(o))}),[o,l,a]),Object(r.useEffect)((function(){return function(){c()}}),[c]),console.log(t,o);var i=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"product__image"},n.a.createElement("img",{src:t.image_url,alt:t.title})),n.a.createElement("div",{className:"product__info"},n.a.createElement("h2",{className:"product__title"},t.title),n.a.createElement("p",{className:"product__price"},"".concat(O(t.price),"\u20ac")),n.a.createElement("p",{className:"product__description",dangerouslySetInnerHTML:u(t.description)})))},u=function(e){return{__html:e}};return n.a.createElement("main",{className:"product"},n.a.createElement("div",{className:"product__wrapper"},t?n.a.createElement(i,null):null))})),P=a(36),C=a(52),w=a(160),x=a(151);var k=Object(l.b)((function(e){return{category:e.single_category,params:e.user.categoryParams}}),{listProducts:d,changeCategoryParams:f})((function(e){var t=e.params,a=e.changeCategoryParams,c=e.listProducts,o=e.category,l=o.price_min,i=o.price_max,u=o.id,s=Math.floor(O(l)),m=Math.ceil(O(i)),p=Object(r.useState)([s,m]),d=Object(C.a)(p,2),g=d[0],f=d[1];return n.a.createElement("div",null,n.a.createElement(x.a,{id:"price-range",gutterBottom:!0},"\u0395\u03cd\u03c1\u03bf\u03c2 \u03c4\u03b9\u03bc\u03ae\u03c2"),n.a.createElement(w.a,{min:s,max:m,value:g,onChange:function(e,t){return f(t)},onChangeCommitted:function(e,r){return function(e,r){var n=Object(v.a)({},t,{min_price:100*r[0],max_price:100*r[1],page:1});a(n),c(u,n)}(0,r)},valueLabelDisplay:"auto","aria-labelledby":"price-range",id:"range-slider"}))})),S=a(38),T=a(156),W=a(161),F=a(157),I=a(163),L=a(164),M=a(155),B=Object(M.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:90},selectEmpty:{marginTop:e.spacing(2)},inputLabel:{transform:"translate(8px, -14px) scale(0.75)"},formControlFilters:{padding:0,marginRight:10,backgroundColor:"#fff"},outlinedInput:Object(S.a)({width:110,fontSize:13,padding:"10px 10px"},e.breakpoints.down("xs"),{width:88})}}));var H=Object(l.b)((function(e){return{params:e.user.categoryParams,category:e.single_category}}),{listProducts:d,changeCategoryParams:f})((function(e){var t=e.params,a=e.category,c=e.changeCategoryParams,o=e.listProducts,l=e.values,i=l.label,u=l.labelWidth,s=l.id,m=l.options,p=B(),d=Object(r.useState)(m[0].value),g=Object(C.a)(d,2),f=g[0],y=g[1];return n.a.createElement(T.a,{variant:"outlined",className:p.formControlFilters},n.a.createElement(W.a,{className:p.inputLabel},i),n.a.createElement(F.a,{value:f,onChange:function(e){var r;y(e.target.value);var n=Object(v.a)({},t,(r={},Object(S.a)(r,s,e.target.value),Object(S.a)(r,"page",1),r));c(n),o(a.id,n)},input:n.a.createElement(I.a,{labelWidth:u,id:s}),inputProps:{className:p.outlinedInput}},m.map((function(e){return n.a.createElement(L.a,{key:e.label,value:e.value},e.label)}))))})),J=Object(l.b)(null,null)((function(e){return n.a.createElement("div",{className:"category-options"},n.a.createElement(k,null),n.a.createElement("div",{className:"category-options__selects"},n.a.createElement(H,{values:{id:"sort",label:"\u03a4\u03b1\u03be\u03b9\u03bd\u03cc\u03bc\u03b7\u03c3\u03b7",labelWidth:84,options:[{label:"\u03a4\u03b9\u03bc\u03ae",value:"price"},{label:"\u03a4\u03af\u03c4\u03bb\u03bf\u03c2",value:"title"}]}}),n.a.createElement(H,{values:{id:"order",label:"\u03a3\u03b5\u03b9\u03c1\u03ac",labelWidth:40,options:[{label:"\u0391\u03cd\u03be\u03bf\u03c5\u03c3\u03b1",value:"asc"},{label:"\u03a6\u03b8\u03af\u03bd\u03bf\u03c5\u03c3\u03b1",value:"desc"}]}})))})),R=a(158);a(112);var z=Object(l.b)((function(e){return{products:e.products,category:e.single_category,params:e.user.categoryParams}}),{listProducts:d,clearProducts:g,getCategory:function(e){var t=m.a.get("".concat(p,"/categories/").concat(e),{"Content-Type":"application/json"});return function(e){t.then((function(t){var a=t.data;e({type:"get-category",payload:a})}))}},clearCategory:function(){return function(e){return e({type:"clear-category",payload:null})}},changeCategoryParams:f,clearCategoryParams:function(e){return function(e){return e({type:"clear-category-params",payload:null})}}})((function(e){var t=e.products,a=e.category,c=e.getCategory,o=e.listProducts,l=e.clearProducts,i=e.clearCategory,u=e.params,s=e.changeCategoryParams,m=e.clearCategoryParams,p=e.match.params.id,d=j(p);Object(r.useEffect)((function(){console.log(p,d),p!==d&&(o(p,u),c(p))}),[u,o,c,p,d]),Object(r.useEffect)((function(){return function(){l(),i(),m()}}),[l,i,m]);var g;return n.a.createElement("main",{className:"category"},n.a.createElement("div",{className:"category__wrapper"},a?n.a.createElement(n.a.Fragment,null,(g=a,n.a.createElement("div",{className:"category-banner"},n.a.createElement("img",{src:g.image_url,alt:g.title}),n.a.createElement("div",{className:"category-banner__info"},n.a.createElement("h2",null,g.title),n.a.createElement("p",null,"\u03a3\u03cd\u03bd\u03bf\u03bb\u03bf \u03c0\u03c1\u03bf\u03ca\u03cc\u03bd\u03c4\u03c9\u03bd: ",g.products_count)))),n.a.createElement(J,{category:a})):null,n.a.createElement("div",{className:"product-list"},t.map((function(e){return function(e){return n.a.createElement("div",{className:"product-card",key:e.id},n.a.createElement(P.a,{to:"/product/".concat(e.slug_path)},n.a.createElement("div",{className:"product-card__image"},n.a.createElement("img",{src:e.image_url,alt:e.title})),n.a.createElement("h3",{className:"product-card__title"},e.title),e.excerpt?n.a.createElement("p",{className:"product-card__excerpt",dangerouslySetInnerHTML:(t=e.excerpt,{__html:t})}):null,n.a.createElement("span",{className:"product-card__price"},O(e.price),"\u20ac")));var t}(e)}))),a?n.a.createElement("div",{className:"pagination"},n.a.createElement(R.a,{count:Math.ceil(a.products_count/u.limit),page:u.page,onChange:function(e,t){var a=Object(v.a)({},u,{page:t});s(a),o(p,a)}})):null))}));a(114);var D=Object(l.b)((function(e){return{categories:e.categories}}),{listCategories:function(){var e=m.a.get("".concat(p,"/categories/"),{"Content-Type":"application/json"});return function(t){e.then((function(e){var a=e.data;t({type:"list-categories",payload:a})}))}}})((function(e){var t=e.categories,a=e.listCategories;Object(r.useEffect)((function(){t.length||a()}),[t,a]);return n.a.createElement("main",{className:"homepage"},n.a.createElement("div",{className:"homepage__wrapper"},t.map((function(e){return function(e){return n.a.createElement("div",{className:"category-card",key:e.id},n.a.createElement(P.a,{to:"/category/".concat(e.id,"/").concat(e.slug)},n.a.createElement("img",{className:"item",src:e.image_url,alt:e.title}),n.a.createElement("h3",null,e.title)))}(e)}))))})),$=function(){return n.a.createElement("div",{className:"not-found"},"Page not found.")},q=a(77),A=a.n(q);a(115);var G=function(){return n.a.createElement("header",{className:"header"},n.a.createElement(P.a,{to:"/"},n.a.createElement("img",{src:A.a,className:"logo",alt:"logo"})))};a(116),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(78),Q=a.n(K)()(),U=Object(i.a)(_.a)(i.d);o.a.render(n.a.createElement(l.a,{store:U(b)},n.a.createElement(u.b,{history:Q},n.a.createElement(G,null),n.a.createElement(u.c,null,n.a.createElement(u.a,{exact:!0,path:"/product/:id/:slug",component:N}),n.a.createElement(u.a,{exact:!0,path:"/category/:id/:slug",component:z}),n.a.createElement(u.a,{exact:!0,path:"/",component:D}),n.a.createElement(u.a,{path:"*",component:$})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a.p+"static/media/logo.2440514b.svg"},84:function(e,t,a){e.exports=a(120)}},[[84,1,2]]]);
//# sourceMappingURL=main.9013990e.chunk.js.map